# This is for testing on travis only
# For production we recommend to rather use
# image: martel/odoo-backup
# in the dbbackup service
db:
  image: postgres:9.4
  environment:
    - POSTGRES_USER=docker
    - POSTGRES_PASS=docker

dbbackup:
  build: .
  volumes:
    - ${PWD}/backup:/var/backup
    - ${PWD}/credentials.json:/var/credentials.json
  environment:
    - DUMPPREFIX=watchkeeper
    - ODOO_FILES=0
    - DRIVE_DESTINATION=path
    - POSTGRES_HOST=db
    - POSTGRES_DBNAME=db
    - POSTGRES_USER=docker
    - POSTGRES_PASS=docker
    - POSTGRES_PORT=5432
  links:
    - db:db
